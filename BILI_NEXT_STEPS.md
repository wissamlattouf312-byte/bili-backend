# BILI — الخطوات القادمة (من IMPLEMENTATION_STATUS)

## ٤ نقاط نعمل عليها

### ١) فترة الضيافة الملكية (٣٠ يوم)
- ✅ الداتابيز والـ claim يضبطان الفترة.
- ✅ **تم:** منع السحب (Withdrawal) أثناء فترة الـ 30 يوم في `wallet_finance.py`.
- ⏳ (اختياري) منع أي خصم نقاط آخر أثناء الفترة إذا ظهرت أماكن خصم جديدة.

### ٢) البوابة الفيروسية والمكافآت
- ✅ **تم:** روابط دخول تلقائي (`?ref=CODE` في الرابط، يُحفظ ويُرسل مع الـ claim).
- ✅ **تم:** نظام تتبع الإحالات (`referral_code` و `referred_by_id` في User، مكافأة للمُحيل).
- ✅ **تم:** مكافأة ٥ حبات للمُحيل عندما المستخدم الجديد يضغط «٢٠ حبة» (رابط المشاركة يظهر بعد النجاح).

### ٣) الإعلان الذكي
- ✅ موديل البوست (تجاري/شخصي) و انتهاء ٤٨ ساعة.
- ⏳ نظام إشعارات (تبريد ١٢ ساعة).
- ⏳ ظهور حسب نصف القطر (Radius).

### ٤) الفيديو والوسائط
- ✅ موديل البوست يدعم فيديو.
- ⏳ ضغط الفيديو، واترمارك BILI، مصغرات، تحسين معاينة واتساب.

---

## ما تم تنفيذه اليوم

1. **زر الاستلام (٢٠ حبة)** في تبويب ROBO_Radar مع مزامنة العدّاد والمحفظة.
2. **منع السحب** أثناء الـ 30 يوم في الـ Backend (`wallet_finance.py`).
3. **البوابة الفيروسية:** روابط `?ref=CODE`، إرسالها مع الـ claim، مكافأة ٥ حبات للمُحيل، ورابط المشاركة بعد النجاح (Backend: User.referral_code, referred_by_id؛ auth_handler؛ Frontend: App + ClaimButton).
4. ترحيل قاعدة البيانات: `alembic/versions/add_referral_fields_to_users.py` (تشغيله عند تفعيل DB).
5. هذا الملف (BILI_NEXT_STEPS.md) كمرجع للخطوات القادمة.
